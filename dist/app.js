(()=>{var ee=Object.create;var Ft=Object.defineProperty;var re=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,ae=Object.prototype.hasOwnProperty;var tt=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var se=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ne(e))!ae.call(r,i)&&i!==t&&Ft(r,i,{get:()=>e[i],enumerable:!(n=re(e,i))||n.enumerable});return r};var Ot=(r,e,t)=>(t=r!=null?ee(ie(r)):{},se(e||!r||!r.__esModule?Ft(t,"default",{value:r,enumerable:!0}):t,r));var Lt=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var a=(r,e,t)=>(Lt(r,e,"read from private field"),t?t.call(r):e.get(r)),l=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},c=(r,e,t,n)=>(Lt(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var ct=tt(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.AttributeAction=E.IgnoreCaseMode=E.SelectorType=void 0;var oe;(function(r){r.Attribute="attribute",r.Pseudo="pseudo",r.PseudoElement="pseudo-element",r.Tag="tag",r.Universal="universal",r.Adjacent="adjacent",r.Child="child",r.Descendant="descendant",r.Parent="parent",r.Sibling="sibling",r.ColumnCombinator="column-combinator"})(oe=E.SelectorType||(E.SelectorType={}));E.IgnoreCaseMode={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var ue;(function(r){r.Any="any",r.Element="element",r.End="end",r.Equals="equals",r.Exists="exists",r.Hyphen="hyphen",r.Not="not",r.Start="start"})(ue=E.AttributeAction||(E.AttributeAction={}))});var Rt=tt(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.parse=W.isTraversal=void 0;var u=ct(),jt=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,le=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,he=new Map([[126,u.AttributeAction.Element],[94,u.AttributeAction.Start],[36,u.AttributeAction.End],[42,u.AttributeAction.Any],[33,u.AttributeAction.Not],[124,u.AttributeAction.Hyphen]]),ce=new Set(["has","not","matches","is","where","host","host-context"]);function qt(r){switch(r.type){case u.SelectorType.Adjacent:case u.SelectorType.Child:case u.SelectorType.Descendant:case u.SelectorType.Parent:case u.SelectorType.Sibling:case u.SelectorType.ColumnCombinator:return!0;default:return!1}}W.isTraversal=qt;var fe=new Set(["contains","icontains"]);function pe(r,e,t){var n=parseInt(e,16)-65536;return n!==n||t?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function et(r){return r.replace(le,pe)}function vt(r){return r===39||r===34}function Dt(r){return r===32||r===9||r===10||r===12||r===13}function de(r){var e=[],t=_t(e,"".concat(r),0);if(t<r.length)throw new Error("Unmatched selector: ".concat(r.slice(t)));return e}W.parse=de;function _t(r,e,t){var n=[];function i(v){var g=e.slice(t+v).match(jt);if(!g)throw new Error("Expected name, found ".concat(e.slice(t)));var Nt=g[0];return t+=v+Nt.length,et(Nt)}function s(v){for(t+=v;t<e.length&&Dt(e.charCodeAt(t));)t++}function p(){t+=1;for(var v=t,g=1;g>0&&t<e.length;t++)e.charCodeAt(t)===40&&!T(t)?g++:e.charCodeAt(t)===41&&!T(t)&&g--;if(g)throw new Error("Parenthesis not matched");return et(e.slice(v,t-1))}function T(v){for(var g=0;e.charCodeAt(--v)===92;)g++;return(g&1)===1}function Z(){if(n.length>0&&qt(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function C(v){if(n.length>0&&n[n.length-1].type===u.SelectorType.Descendant){n[n.length-1].type=v;return}Z(),n.push({type:v})}function S(v,g){n.push({type:u.SelectorType.Attribute,name:v,action:g,value:i(1),namespace:null,ignoreCase:"quirks"})}function k(){if(n.length&&n[n.length-1].type===u.SelectorType.Descendant&&n.pop(),n.length===0)throw new Error("Empty sub-selector");r.push(n)}if(s(0),e.length===t)return t;t:for(;t<e.length;){var q=e.charCodeAt(t);switch(q){case 32:case 9:case 10:case 12:case 13:{(n.length===0||n[0].type!==u.SelectorType.Descendant)&&(Z(),n.push({type:u.SelectorType.Descendant})),s(1);break}case 62:{C(u.SelectorType.Child),s(1);break}case 60:{C(u.SelectorType.Parent),s(1);break}case 126:{C(u.SelectorType.Sibling),s(1);break}case 43:{C(u.SelectorType.Adjacent),s(1);break}case 46:{S("class",u.AttributeAction.Element);break}case 35:{S("id",u.AttributeAction.Equals);break}case 91:{s(1);var P=void 0,M=null;e.charCodeAt(t)===124?P=i(1):e.startsWith("*|",t)?(M="*",P=i(2)):(P=i(0),e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==61&&(M=P,P=i(1))),s(0);var _=u.AttributeAction.Exists,R=he.get(e.charCodeAt(t));if(R){if(_=R,e.charCodeAt(t+1)!==61)throw new Error("Expected `=`");s(2)}else e.charCodeAt(t)===61&&(_=u.AttributeAction.Equals,s(1));var O="",A=null;if(_!=="exists"){if(vt(e.charCodeAt(t))){for(var G=e.charCodeAt(t),w=t+1;w<e.length&&(e.charCodeAt(w)!==G||T(w));)w+=1;if(e.charCodeAt(w)!==G)throw new Error("Attribute value didn't end");O=et(e.slice(t+1,w)),t=w+1}else{for(var V=t;t<e.length&&(!Dt(e.charCodeAt(t))&&e.charCodeAt(t)!==93||T(t));)t+=1;O=et(e.slice(V,t))}s(0);var x=e.charCodeAt(t)|32;x===115?(A=!1,s(1)):x===105&&(A=!0,s(1))}if(e.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;var te={type:u.SelectorType.Attribute,name:P,action:_,value:O,namespace:M,ignoreCase:A};n.push(te);break}case 58:{if(e.charCodeAt(t+1)===58){n.push({type:u.SelectorType.PseudoElement,name:i(2).toLowerCase(),data:e.charCodeAt(t)===40?p():null});continue}var I=i(1).toLowerCase(),y=null;if(e.charCodeAt(t)===40)if(ce.has(I)){if(vt(e.charCodeAt(t+1)))throw new Error("Pseudo-selector ".concat(I," cannot be quoted"));if(y=[],t=_t(y,e,t+1),e.charCodeAt(t)!==41)throw new Error("Missing closing parenthesis in :".concat(I," (").concat(e,")"));t+=1}else{if(y=p(),fe.has(I)){var Pt=y.charCodeAt(0);Pt===y.charCodeAt(y.length-1)&&vt(Pt)&&(y=y.slice(1,-1))}y=et(y)}n.push({type:u.SelectorType.Pseudo,name:I,data:y});break}case 44:{k(),n=[],s(1);break}default:{if(e.startsWith("/*",t)){var Mt=e.indexOf("*/",t+2);if(Mt<0)throw new Error("Comment was not terminated");t=Mt+2,n.length===0&&s(0);break}var M=null,L=void 0;if(q===42)t+=1,L="*";else if(q===124){if(L="",e.charCodeAt(t+1)===124){C(u.SelectorType.ColumnCombinator),s(2);break}}else if(jt.test(e.slice(t)))L=i(0);else break t;e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==124&&(M=L,e.charCodeAt(t+1)===42?(L="*",t+=2):L=i(1)),n.push(L==="*"?{type:u.SelectorType.Universal,namespace:M}:{type:u.SelectorType.Tag,name:L,namespace:M})}}}return k(),t}});var Ut=tt(z=>{"use strict";var ft=z&&z.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(z,"__esModule",{value:!0});z.stringify=void 0;var h=ct(),Bt=["\\",'"'],Gt=ft(ft([],Bt,!0),["(",")"],!1),me=new Set(Bt.map(function(r){return r.charCodeAt(0)})),Ht=new Set(Gt.map(function(r){return r.charCodeAt(0)})),U=new Set(ft(ft([],Gt,!0),["~","^","$","*","+","!","|",":","[","]"," ","."],!1).map(function(r){return r.charCodeAt(0)}));function Vt(r){return r.map(function(e){return e.map(ve).join("")}).join(", ")}z.stringify=Vt;function ve(r,e,t){switch(r.type){case h.SelectorType.Child:return e===0?"> ":" > ";case h.SelectorType.Parent:return e===0?"< ":" < ";case h.SelectorType.Sibling:return e===0?"~ ":" ~ ";case h.SelectorType.Adjacent:return e===0?"+ ":" + ";case h.SelectorType.Descendant:return" ";case h.SelectorType.ColumnCombinator:return e===0?"|| ":" || ";case h.SelectorType.Universal:return r.namespace==="*"&&e+1<t.length&&"name"in t[e+1]?"":"".concat(Wt(r.namespace),"*");case h.SelectorType.Tag:return $t(r);case h.SelectorType.PseudoElement:return"::".concat(N(r.name,U)).concat(r.data===null?"":"(".concat(N(r.data,Ht),")"));case h.SelectorType.Pseudo:return":".concat(N(r.name,U)).concat(r.data===null?"":"(".concat(typeof r.data=="string"?N(r.data,Ht):Vt(r.data),")"));case h.SelectorType.Attribute:{if(r.name==="id"&&r.action===h.AttributeAction.Equals&&r.ignoreCase==="quirks"&&!r.namespace)return"#".concat(N(r.value,U));if(r.name==="class"&&r.action===h.AttributeAction.Element&&r.ignoreCase==="quirks"&&!r.namespace)return".".concat(N(r.value,U));var n=$t(r);return r.action===h.AttributeAction.Exists?"[".concat(n,"]"):"[".concat(n).concat(be(r.action),'="').concat(N(r.value,me),'"').concat(r.ignoreCase===null?"":r.ignoreCase?" i":" s","]")}}}function be(r){switch(r){case h.AttributeAction.Equals:return"";case h.AttributeAction.Element:return"~";case h.AttributeAction.Start:return"^";case h.AttributeAction.End:return"$";case h.AttributeAction.Any:return"*";case h.AttributeAction.Not:return"!";case h.AttributeAction.Hyphen:return"|";case h.AttributeAction.Exists:throw new Error("Shouldn't be here")}}function $t(r){return"".concat(Wt(r.namespace)).concat(N(r.name,U))}function Wt(r){return r!==null?"".concat(r==="*"?"*":N(r,U),"|"):""}function N(r,e){for(var t=0,n="",i=0;i<r.length;i++)e.has(r.charCodeAt(i))&&(n+="".concat(r.slice(t,i),"\\").concat(r.charAt(i)),t=i+1);return n.length>0?n+r.slice(t):r}});var Qt=tt(b=>{"use strict";var ge=b&&b.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Ce=b&&b.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ge(e,r,t)};Object.defineProperty(b,"__esModule",{value:!0});b.stringify=b.parse=b.isTraversal=void 0;Ce(ct(),b);var zt=Rt();Object.defineProperty(b,"isTraversal",{enumerable:!0,get:function(){return zt.isTraversal}});Object.defineProperty(b,"parse",{enumerable:!0,get:function(){return zt.parse}});var Ae=Ut();Object.defineProperty(b,"stringify",{enumerable:!0,get:function(){return Ae.stringify}})});var bt=tt(o=>{"use strict";var pt,ye=o&&o.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},we=o&&o.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)};Object.defineProperty(o,"__esModule",{value:!0}),o.Element=o.t=o.s=o.removeClass=o.onEach=o.once=o.on=o.off=o.hasClass=o.h=o.empty=o.emitCustom=o.emit=o.addClass=void 0;var Ee=Qt();o.addClass=(r,...e)=>r.classList.add(...e);o.emit=(r,e)=>r.dispatchEvent(e);o.emitCustom=(r,e,...t)=>(0,o.emit)(r,new CustomEvent(e,{detail:t}));o.empty=r=>{for(var e;r.hasChildNodes();)(e=r.firstChild)===null||e===void 0||e.remove()};o.h=(r,...e)=>{let[t]=(0,Ee.parse)(r).map(n=>n.reduce((i,s)=>{var p;return s.type==="tag"?document.createElement(s.name):(s.type==="attribute"&&s.name!=="class"&&i.setAttribute(s.name,(p=s.value)!==null&&p!==void 0?p:""),s.type==="attribute"&&s.name==="class"&&i.classList.add(s.value),i)},document.createElement("div")));return e.forEach(n=>{n instanceof F&&(n=n.element()),t.append(n)}),t};o.hasClass=(r,e)=>r.classList.contains(e);o.off=(r,e,t,n={})=>r.removeEventListener(e,t,n);o.on=(r,e,t,n={})=>r.addEventListener(e,t,n);o.once=(r,e,t,n={})=>(0,o.on)(r,e,t,Object.assign(Object.assign({},typeof n=="boolean"?{capture:n}:n),{once:!0}));o.onEach=(r,e,t,n={})=>e.forEach(i=>(0,o.on)(r,i,t,n));o.removeClass=(r,...e)=>r.classList.remove(...e);o.s=r=>{let e=document.createElement("div");return e.innerHTML=r,e.firstElementChild};o.t=r=>document.createTextNode(r);var F=class{constructor(e){pt.set(this,void 0),ye(this,pt,e,"f")}static fromSelector(e,...t){return new F((0,o.h)(e,...t))}static fromString(e){return new F((0,o.s)(e))}addClass(...e){(0,o.addClass)(this.element(),...e)}append(...e){e.forEach(t=>{t instanceof F&&(t=t.element()),this.element().append(t)})}element(){return we(this,pt,"f")}emit(e){return(0,o.emit)(this.element(),e)}emitCustom(e,...t){return(0,o.emitCustom)(this.element(),e,...t)}empty(){(0,o.empty)(this.element())}hasClass(e){return(0,o.hasClass)(this.element(),e)}on(e,t,n={}){(0,o.on)(this.element(),e,t,n)}off(e,t,n={}){(0,o.off)(this.element(),e,t,n)}once(e,t,n={}){(0,o.once)(this.element(),e,t,n)}onEach(e,t,n={}){(0,o.onEach)(this.element(),e,t,n)}query(e){return this.element().querySelector(e)}queryAll(e){return this.element().querySelectorAll(e)}removeClass(...e){(0,o.removeClass)(this.element(),...e)}};o.Element=F,pt=new WeakMap,o.default=F});var Xt=Ot(bt()),rt=Ot(bt()),gt=class extends Xt.default{attr(e,t=""){this.element().setAttribute(e,t)}removeAttr(e){!this.element().hasAttribute(e)||this.element().removeAttribute(e)}},dt=gt;var nt,H,it,Ct=class extends dt{constructor(t){super((0,rt.h)(".cell"));l(this,nt,null);l(this,H,[]);l(this,it,void 0);c(this,it,t),this.attr("data-i",t.toString())}colour(){return a(this,nt)}index(){return a(this,it)}setColour(t){if(c(this,nt,t),t===null){this.removeAttr("data-id");return}this.attr("data-id",t.toString())}addConnection(t){a(this,H).includes(t)||(a(this,H).push(t),this.attr("data-"+t))}dropConnection(t){let n=a(this,H).indexOf(t);n!==-1&&(a(this,H).splice(n,1),this.removeAttr("data-"+t))}setFinal(t){if(t){this.attr("data-final");return}this.removeAttr("data-final")}};nt=new WeakMap,H=new WeakMap,it=new WeakMap;var mt=Ct;var At=class extends mt{constructor(e,t){super(e),super.setColour(t),this.attr("data-id",t.toString()),this.attr("data-point")}setColour(e){throw new TypeError("Cannot change the colour of a Point")}},f=At;var wt=(r,e,t,n)=>{let i=r.index()%t-e.index()%t,s=Math.floor(r.index()/n)-Math.floor(e.index()/n);return i===-1&&s===0?"l":i===1&&s===0?"r":i===0&&s===-1?"t":i===0&&s===1?"b":!1};var d,Q,X,Y,yt=class{constructor(e,t){l(this,d,[]);l(this,Q,void 0);l(this,X,void 0);l(this,Y,0);c(this,Q,e),c(this,X,t)}breakAt(e){if(!this.includes(e))return;let t=a(this,d).indexOf(e),n=a(this,d).slice(0,t);for(a(this,d).slice(t).length>n.length&&this.first()instanceof f&&this.last()instanceof f&&a(this,d).reverse();this.last()!==e;)this.pop()}canAdd(e){let t=this.last();return t===null?e instanceof f:this.complete()?!1:this.isNeighbour(t,e)&&(!(e instanceof f)||e.colour()===this.colour())}clear(){for(;this.last();)this.pop()}colour(){return a(this,Q)}complete(){let e=this.first(),t=this.last();return this.length()>1&&e&&t&&e!==t&&e instanceof f&&t instanceof f}first(){return this.length()===0?null:a(this,d)[0]}includes(e){return a(this,d).includes(e)}isNeighbour(e,t){return wt(e,t,a(this,X).width(),a(this,X).height())}last(){return this.length()===0?null:a(this,d)[this.length()-1]}length(){return a(this,d).length}pop(){if(this.length()===0)return;let e=this.complete(),t=a(this,d).pop(),n=this.last();t instanceof f||t.setColour(null),t.setFinal(!1),n&&(n.dropConnection(this.isNeighbour(t,n)),t.dropConnection(this.isNeighbour(n,t))),e&&(t.setFinal(!1),a(this,d).forEach(i=>i.setFinal(!1)),this.setStatus(0))}push(e){let t=this.last();t&&!this.canAdd(e)||(a(this,d).push(e),e instanceof f||e.setColour(a(this,Q)),t&&(t.addConnection(this.isNeighbour(e,t)),e.addConnection(this.isNeighbour(t,e))),this.complete()&&this.setStatus(2))}setStatus(e){if(!(a(this,Y)===2&&e===1)){if(c(this,Y,e),e===0){a(this,d).forEach(t=>t.setFinal(!1));return}a(this,d).forEach(t=>t.setFinal(!0))}}status(){return a(this,Y)}};d=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakMap;var Yt=yt;var Jt=(r,e=[])=>({cell:r,stack:e}),j,at,st,J,K,ot,$,ut,Et=class{constructor(e,t,n){l(this,j,[]);l(this,at,void 0);l(this,st,void 0);l(this,J,void 0);l(this,K,new Map);l(this,ot,[]);l(this,$,[]);l(this,ut,void 0);c(this,st,t),c(this,J,e),c(this,ut,n),c(this,at,e.cells()),a(this,$).push(Jt(t))}generate(){for(;a(this,$).length;){let e=a(this,$).shift(),{cell:t}=e;a(this,ot).includes(t)||(this.neighboursOf(t).forEach(n=>{if(n instanceof f&&a(this,st).colour()!==n.colour()||e.stack.includes(n))return;let i=Jt(n,[...e.stack,t]);if(n===a(this,ut)){a(this,j).push(i.stack);return}a(this,$).push(i)}),a(this,ot).push(t))}}isNeighbour(e,t){return wt(e,t,a(this,J).width(),a(this,J).height())}isPathAvailable(){return a(this,j).length===0&&this.generate(),a(this,j).length>0}neighboursOf(e){return a(this,K).has(e)||a(this,K).set(e,a(this,at).filter(t=>this.isNeighbour(e,t)!==!1)),a(this,K).get(e)}shortestPath(){a(this,j).length===0&&this.generate();let[e]=a(this,j).sort((t,n)=>t.length-n.length);return e}};j=new WeakMap,at=new WeakMap,st=new WeakMap,J=new WeakMap,K=new WeakMap,ot=new WeakMap,$=new WeakMap,ut=new WeakMap;var Kt=Et;function Zt(r,e,t){var n=t||{},i=n.noTrailing,s=i===void 0?!1:i,p=n.noLeading,T=p===void 0?!1:p,Z=n.debounceMode,C=Z===void 0?void 0:Z,S,k=!1,q=0;function P(){S&&clearTimeout(S)}function M(R){var O=R||{},A=O.upcomingOnly,G=A===void 0?!1:A;P(),k=!G}function _(){for(var R=arguments.length,O=new Array(R),A=0;A<R;A++)O[A]=arguments[A];var G=this,w=Date.now()-q;if(k)return;function V(){q=Date.now(),e.apply(G,O)}function x(){S=void 0}!T&&C&&!S&&V(),P(),C===void 0&&w>r?T?(q=Date.now(),s||(S=setTimeout(C?x:V,r))):V():s!==!0&&(S=setTimeout(C?x:V,C===void 0?r-w:r))}return _.cancel=M,_}var B,m,D,lt,ht,Tt=class extends dt{constructor(t,n,i=[]){super((0,rt.h)(".grid"));l(this,B,new Map);l(this,m,null);l(this,D,new Map);l(this,lt,void 0);l(this,ht,void 0);this.setSize(t,n),i.forEach(s=>{a(this,B).set(s.element(),s),this.append(s)}),this.bindEvents()}bindEvents(){this.onEach(["touchstart","mousedown"],t=>{if(t instanceof MouseEvent&&t.buttons!==1)return;t.preventDefault();let n=this.cellFromEvent(t);if(n===null)return;let i=this.pathFromCell(n);if(i&&i.complete()&&i.last()===n){c(this,m,i),i.setStatus(0),i.clear(),i.push(n);return}if(i&&i.last()!==n){c(this,m,i),i.setStatus(0),i.breakAt(n);return}if(i&&i.last()===n){c(this,m,i),i.setStatus(0);return}if(!(n instanceof f))return;let s=new Yt(n.colour(),this);c(this,m,s),a(this,D).set(s.colour(),s)}),this.onEach(["touchmove","mousemove"],Zt(1e3/60,t=>{if(t instanceof MouseEvent&&!t.buttons)return;let n=this.cellFromEvent(t),i=a(this,m);n===null||i===null||i&&i.status()===2&&!i.includes(n)||i.last()===n||this.handleAddCellToCurrentPath(n)})),this.onEach(["touchend","mouseup"],()=>{a(this,m)!==null&&(a(this,m).setStatus(1),a(this,m).length()<2&&(a(this,m).clear(),a(this,D).delete(a(this,m).colour())),c(this,m,null))})}cells(){return Array.from(a(this,B).values())}cellFromEvent(t){var n,i;return t instanceof MouseEvent?(n=a(this,B).get(t.relatedTarget||t.target))!=null?n:null:(i=a(this,B).get(document.elementFromPoint(t.touches[0].pageX,t.touches[0].pageY)))!=null?i:null}handleAddCellToCurrentPath(t){let n=this.pathFromCell(t,a(this,m)),i=a(this,m);if(n&&n!==i&&!(t instanceof f)&&(n.breakAt(t),n.pop()),i.includes(t)&&i.last()!==t&&i.breakAt(t),i.canAdd(t)){i.push(t);return}let s=i.last();if(!s)return;let p=new Kt(this,s,t);p.isPathAvailable()&&p.shortestPath().forEach(T=>this.handleAddCellToCurrentPath(T))}height(){return a(this,lt)}pathFromCell(t,n=null){let i=null;return a(this,D).forEach(s=>{i||s.includes(t)&&(i=s)}),i===null&&t instanceof f&&a(this,D).has(t.colour())&&(i=a(this,D).get(t.colour()),i!==n&&!i.canAdd(t)&&(console.log(i,n),console.log("clearing the path"),i.clear())),i}setSize(t,n){c(this,lt,t),c(this,ht,n),this.element().style.setProperty("--height",t.toString()),this.element().style.setProperty("--width",n.toString())}width(){return a(this,ht)}};B=new WeakMap,m=new WeakMap,D=new WeakMap,lt=new WeakMap,ht=new WeakMap;var kt=Tt;var xt=[[3,3,"a1abc2bc"],[8,8,"2b7gfe5d10d1f3b1g2e1c2ca1h3a5h"],[15,15,"4o1i9l6a11eb5g5e20j2g26n9f1f9l7h1o7n10j7c6pd3mc4h5p6im3kad23b2k]"]];var Te=(r,e,t)=>{let n=t.match(/\d+|[a-z]/gi);if(n===null)throw new TypeError("Invalid level definition");let i=n.flatMap(p=>/^\d+$/.test(p)?new Array(parseInt(p)).fill(null):parseInt(p,36)-9),s=r*e;return i.length<s&&i.push(...new Array(s-i.length).fill(null)),[e,r,i]},St=class{generate(e=-1,t=-1,n=2){return Te(...xt[Math.floor(Math.random()*xt.length)])}},It=St;var Se=new It,[Pe,Me,Ne]=Se.generate(),Fe=new kt(Pe,Me,Ne.map((r,e)=>r===null?new mt(e):new f(e,r))),Oe=document.getElementById("app");Oe.append(Fe.element());})();
//# sourceMappingURL=app.js.map
