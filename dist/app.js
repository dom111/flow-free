(()=>{var It=Object.create;var Mt=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var re=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var et=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var ne=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ee(e))!ie.call(r,n)&&n!==t&&Mt(r,n,{get:()=>e[n],enumerable:!(i=te(e,n))||i.enumerable});return r};var Nt=(r,e,t)=>(t=r!=null?It(re(r)):{},ne(e||!r||!r.__esModule?Mt(t,"default",{value:r,enumerable:!0}):t,r));var Ft=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var a=(r,e,t)=>(Ft(r,e,"read from private field"),t?t.call(r):e.get(r)),l=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},h=(r,e,t,i)=>(Ft(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t);var ct=et(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.AttributeAction=E.IgnoreCaseMode=E.SelectorType=void 0;var ae;(function(r){r.Attribute="attribute",r.Pseudo="pseudo",r.PseudoElement="pseudo-element",r.Tag="tag",r.Universal="universal",r.Adjacent="adjacent",r.Child="child",r.Descendant="descendant",r.Parent="parent",r.Sibling="sibling",r.ColumnCombinator="column-combinator"})(ae=E.SelectorType||(E.SelectorType={}));E.IgnoreCaseMode={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var se;(function(r){r.Any="any",r.Element="element",r.End="end",r.Equals="equals",r.Exists="exists",r.Hyphen="hyphen",r.Not="not",r.Start="start"})(se=E.AttributeAction||(E.AttributeAction={}))});var qt=et(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.parse=W.isTraversal=void 0;var u=ct(),Ot=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,oe=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,ue=new Map([[126,u.AttributeAction.Element],[94,u.AttributeAction.Start],[36,u.AttributeAction.End],[42,u.AttributeAction.Any],[33,u.AttributeAction.Not],[124,u.AttributeAction.Hyphen]]),le=new Set(["has","not","matches","is","where","host","host-context"]);function jt(r){switch(r.type){case u.SelectorType.Adjacent:case u.SelectorType.Child:case u.SelectorType.Descendant:case u.SelectorType.Parent:case u.SelectorType.Sibling:case u.SelectorType.ColumnCombinator:return!0;default:return!1}}W.isTraversal=jt;var he=new Set(["contains","icontains"]);function ce(r,e,t){var i=parseInt(e,16)-65536;return i!==i||t?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)}function rt(r){return r.replace(oe,ce)}function mt(r){return r===39||r===34}function Dt(r){return r===32||r===9||r===10||r===12||r===13}function fe(r){var e=[],t=Lt(e,"".concat(r),0);if(t<r.length)throw new Error("Unmatched selector: ".concat(r.slice(t)));return e}W.parse=fe;function Lt(r,e,t){var i=[];function n(v){var g=e.slice(t+v).match(Ot);if(!g)throw new Error("Expected name, found ".concat(e.slice(t)));var Pt=g[0];return t+=v+Pt.length,rt(Pt)}function s(v){for(t+=v;t<e.length&&Dt(e.charCodeAt(t));)t++}function p(){t+=1;for(var v=t,g=1;g>0&&t<e.length;t++)e.charCodeAt(t)===40&&!f(t)?g++:e.charCodeAt(t)===41&&!f(t)&&g--;if(g)throw new Error("Parenthesis not matched");return rt(e.slice(v,t-1))}function f(v){for(var g=0;e.charCodeAt(--v)===92;)g++;return(g&1)===1}function L(){if(i.length>0&&jt(i[i.length-1]))throw new Error("Did not expect successive traversals.")}function C(v){if(i.length>0&&i[i.length-1].type===u.SelectorType.Descendant){i[i.length-1].type=v;return}L(),i.push({type:v})}function T(v,g){i.push({type:u.SelectorType.Attribute,name:v,action:g,value:n(1),namespace:null,ignoreCase:"quirks"})}function x(){if(i.length&&i[i.length-1].type===u.SelectorType.Descendant&&i.pop(),i.length===0)throw new Error("Empty sub-selector");r.push(i)}if(s(0),e.length===t)return t;t:for(;t<e.length;){var q=e.charCodeAt(t);switch(q){case 32:case 9:case 10:case 12:case 13:{(i.length===0||i[0].type!==u.SelectorType.Descendant)&&(L(),i.push({type:u.SelectorType.Descendant})),s(1);break}case 62:{C(u.SelectorType.Child),s(1);break}case 60:{C(u.SelectorType.Parent),s(1);break}case 126:{C(u.SelectorType.Sibling),s(1);break}case 43:{C(u.SelectorType.Adjacent),s(1);break}case 46:{T("class",u.AttributeAction.Element);break}case 35:{T("id",u.AttributeAction.Equals);break}case 91:{s(1);var S=void 0,P=null;e.charCodeAt(t)===124?S=n(1):e.startsWith("*|",t)?(P="*",S=n(2)):(S=n(0),e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==61&&(P=S,S=n(1))),s(0);var _=u.AttributeAction.Exists,G=ue.get(e.charCodeAt(t));if(G){if(_=G,e.charCodeAt(t+1)!==61)throw new Error("Expected `=`");s(2)}else e.charCodeAt(t)===61&&(_=u.AttributeAction.Equals,s(1));var F="",A=null;if(_!=="exists"){if(mt(e.charCodeAt(t))){for(var R=e.charCodeAt(t),w=t+1;w<e.length&&(e.charCodeAt(w)!==R||f(w));)w+=1;if(e.charCodeAt(w)!==R)throw new Error("Attribute value didn't end");F=rt(e.slice(t+1,w)),t=w+1}else{for(var V=t;t<e.length&&(!Dt(e.charCodeAt(t))&&e.charCodeAt(t)!==93||f(t));)t+=1;F=rt(e.slice(V,t))}s(0);var I=e.charCodeAt(t)|32;I===115?(A=!1,s(1)):I===105&&(A=!0,s(1))}if(e.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;var xt={type:u.SelectorType.Attribute,name:S,action:_,value:F,namespace:P,ignoreCase:A};i.push(xt);break}case 58:{if(e.charCodeAt(t+1)===58){i.push({type:u.SelectorType.PseudoElement,name:n(2).toLowerCase(),data:e.charCodeAt(t)===40?p():null});continue}var tt=n(1).toLowerCase(),y=null;if(e.charCodeAt(t)===40)if(le.has(tt)){if(mt(e.charCodeAt(t+1)))throw new Error("Pseudo-selector ".concat(tt," cannot be quoted"));if(y=[],t=Lt(y,e,t+1),e.charCodeAt(t)!==41)throw new Error("Missing closing parenthesis in :".concat(tt," (").concat(e,")"));t+=1}else{if(y=p(),he.has(tt)){var Tt=y.charCodeAt(0);Tt===y.charCodeAt(y.length-1)&&mt(Tt)&&(y=y.slice(1,-1))}y=rt(y)}i.push({type:u.SelectorType.Pseudo,name:tt,data:y});break}case 44:{x(),i=[],s(1);break}default:{if(e.startsWith("/*",t)){var St=e.indexOf("*/",t+2);if(St<0)throw new Error("Comment was not terminated");t=St+2,i.length===0&&s(0);break}var P=null,O=void 0;if(q===42)t+=1,O="*";else if(q===124){if(O="",e.charCodeAt(t+1)===124){C(u.SelectorType.ColumnCombinator),s(2);break}}else if(Ot.test(e.slice(t)))O=n(0);else break t;e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==124&&(P=O,e.charCodeAt(t+1)===42?(O="*",t+=2):O=n(1)),i.push(O==="*"?{type:u.SelectorType.Universal,namespace:P}:{type:u.SelectorType.Tag,name:O,namespace:P})}}}return x(),t}});var Vt=et(U=>{"use strict";var ft=U&&U.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return r.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(U,"__esModule",{value:!0});U.stringify=void 0;var c=ct(),Ht=["\\",'"'],$t=ft(ft([],Ht,!0),["(",")"],!1),pe=new Set(Ht.map(function(r){return r.charCodeAt(0)})),_t=new Set($t.map(function(r){return r.charCodeAt(0)})),z=new Set(ft(ft([],$t,!0),["~","^","$","*","+","!","|",":","[","]"," ","."],!1).map(function(r){return r.charCodeAt(0)}));function Bt(r){return r.map(function(e){return e.map(de).join("")}).join(", ")}U.stringify=Bt;function de(r,e,t){switch(r.type){case c.SelectorType.Child:return e===0?"> ":" > ";case c.SelectorType.Parent:return e===0?"< ":" < ";case c.SelectorType.Sibling:return e===0?"~ ":" ~ ";case c.SelectorType.Adjacent:return e===0?"+ ":" + ";case c.SelectorType.Descendant:return" ";case c.SelectorType.ColumnCombinator:return e===0?"|| ":" || ";case c.SelectorType.Universal:return r.namespace==="*"&&e+1<t.length&&"name"in t[e+1]?"":"".concat(Rt(r.namespace),"*");case c.SelectorType.Tag:return Gt(r);case c.SelectorType.PseudoElement:return"::".concat(M(r.name,z)).concat(r.data===null?"":"(".concat(M(r.data,_t),")"));case c.SelectorType.Pseudo:return":".concat(M(r.name,z)).concat(r.data===null?"":"(".concat(typeof r.data=="string"?M(r.data,_t):Bt(r.data),")"));case c.SelectorType.Attribute:{if(r.name==="id"&&r.action===c.AttributeAction.Equals&&r.ignoreCase==="quirks"&&!r.namespace)return"#".concat(M(r.value,z));if(r.name==="class"&&r.action===c.AttributeAction.Element&&r.ignoreCase==="quirks"&&!r.namespace)return".".concat(M(r.value,z));var i=Gt(r);return r.action===c.AttributeAction.Exists?"[".concat(i,"]"):"[".concat(i).concat(me(r.action),'="').concat(M(r.value,pe),'"').concat(r.ignoreCase===null?"":r.ignoreCase?" i":" s","]")}}}function me(r){switch(r){case c.AttributeAction.Equals:return"";case c.AttributeAction.Element:return"~";case c.AttributeAction.Start:return"^";case c.AttributeAction.End:return"$";case c.AttributeAction.Any:return"*";case c.AttributeAction.Not:return"!";case c.AttributeAction.Hyphen:return"|";case c.AttributeAction.Exists:throw new Error("Shouldn't be here")}}function Gt(r){return"".concat(Rt(r.namespace)).concat(M(r.name,z))}function Rt(r){return r!==null?"".concat(r==="*"?"*":M(r,z),"|"):""}function M(r,e){for(var t=0,i="",n=0;n<r.length;n++)e.has(r.charCodeAt(n))&&(i+="".concat(r.slice(t,n),"\\").concat(r.charAt(n)),t=n+1);return i.length>0?i+r.slice(t):r}});var zt=et(b=>{"use strict";var ve=b&&b.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,i,n)}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),be=b&&b.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ve(e,r,t)};Object.defineProperty(b,"__esModule",{value:!0});b.stringify=b.parse=b.isTraversal=void 0;be(ct(),b);var Wt=qt();Object.defineProperty(b,"isTraversal",{enumerable:!0,get:function(){return Wt.isTraversal}});Object.defineProperty(b,"parse",{enumerable:!0,get:function(){return Wt.parse}});var ge=Vt();Object.defineProperty(b,"stringify",{enumerable:!0,get:function(){return ge.stringify}})});var vt=et(o=>{"use strict";var pt,Ce=o&&o.__classPrivateFieldSet||function(r,e,t,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t},Ae=o&&o.__classPrivateFieldGet||function(r,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(r):i?i.value:e.get(r)};Object.defineProperty(o,"__esModule",{value:!0}),o.Element=o.t=o.s=o.removeClass=o.onEach=o.once=o.on=o.off=o.hasClass=o.h=o.empty=o.emitCustom=o.emit=o.addClass=void 0;var ye=zt();o.addClass=(r,...e)=>r.classList.add(...e);o.emit=(r,e)=>r.dispatchEvent(e);o.emitCustom=(r,e,...t)=>(0,o.emit)(r,new CustomEvent(e,{detail:t}));o.empty=r=>{for(var e;r.hasChildNodes();)(e=r.firstChild)===null||e===void 0||e.remove()};o.h=(r,...e)=>{let[t]=(0,ye.parse)(r).map(i=>i.reduce((n,s)=>{var p;return s.type==="tag"?document.createElement(s.name):(s.type==="attribute"&&s.name!=="class"&&n.setAttribute(s.name,(p=s.value)!==null&&p!==void 0?p:""),s.type==="attribute"&&s.name==="class"&&n.classList.add(s.value),n)},document.createElement("div")));return e.forEach(i=>{i instanceof N&&(i=i.element()),t.append(i)}),t};o.hasClass=(r,e)=>r.classList.contains(e);o.off=(r,e,t,i={})=>r.removeEventListener(e,t,i);o.on=(r,e,t,i={})=>r.addEventListener(e,t,i);o.once=(r,e,t,i={})=>(0,o.on)(r,e,t,Object.assign(Object.assign({},typeof i=="boolean"?{capture:i}:i),{once:!0}));o.onEach=(r,e,t,i={})=>e.forEach(n=>(0,o.on)(r,n,t,i));o.removeClass=(r,...e)=>r.classList.remove(...e);o.s=r=>{let e=document.createElement("div");return e.innerHTML=r,e.firstElementChild};o.t=r=>document.createTextNode(r);var N=class{constructor(e){pt.set(this,void 0),Ce(this,pt,e,"f")}static fromSelector(e,...t){return new N((0,o.h)(e,...t))}static fromString(e){return new N((0,o.s)(e))}addClass(...e){(0,o.addClass)(this.element(),...e)}append(...e){e.forEach(t=>{t instanceof N&&(t=t.element()),this.element().append(t)})}element(){return Ae(this,pt,"f")}emit(e){return(0,o.emit)(this.element(),e)}emitCustom(e,...t){return(0,o.emitCustom)(this.element(),e,...t)}empty(){(0,o.empty)(this.element())}hasClass(e){return(0,o.hasClass)(this.element(),e)}on(e,t,i={}){(0,o.on)(this.element(),e,t,i)}off(e,t,i={}){(0,o.off)(this.element(),e,t,i)}once(e,t,i={}){(0,o.once)(this.element(),e,t,i)}onEach(e,t,i={}){(0,o.onEach)(this.element(),e,t,i)}query(e){return this.element().querySelector(e)}queryAll(e){return this.element().querySelectorAll(e)}removeClass(...e){(0,o.removeClass)(this.element(),...e)}};o.Element=N,pt=new WeakMap,o.default=N});var Ut=Nt(vt()),it=Nt(vt()),bt=class extends Ut.default{attr(e,t=""){this.element().setAttribute(e,t)}removeAttr(e){!this.element().hasAttribute(e)||this.element().removeAttribute(e)}},dt=bt;var Ct=(r,e,t,i)=>{let n=r.index()%t-e.index()%t,s=Math.floor(r.index()/i)-Math.floor(e.index()/i);return n===-1&&s===0?"l":n===1&&s===0?"r":n===0&&s===-1?"t":n===0&&s===1?"b":!1};var d,Q,X,Y,gt=class{constructor(e,t){l(this,d,[]);l(this,Q,void 0);l(this,X,void 0);l(this,Y,0);h(this,Q,e),h(this,X,t)}breakAt(e){if(!this.includes(e))return;let t=a(this,d).indexOf(e),i=a(this,d).slice(0,t);for(a(this,d).slice(t).length>i.length&&this.first().point()&&this.last().point()&&a(this,d).reverse();this.last()!==e;)this.pop()}canAdd(e){let t=this.last();return t===null?e.point():this.complete()?!1:this.isNeighbour(t,e)&&(!e.point()||e.colour()===this.colour())}clear(){for(;this.last();)this.pop()}colour(){return a(this,Q)}complete(){let e=this.first(),t=this.last();return this.length()>1&&e&&t&&e!==t&&e.point()&&t.point()}first(){return this.length()===0?null:a(this,d)[0]}includes(e){return a(this,d).includes(e)}isNeighbour(e,t){return Ct(e,t,a(this,X).width(),a(this,X).height())}last(){return this.length()===0?null:a(this,d)[this.length()-1]}length(){return a(this,d).length}pop(){if(this.length()===0)return;let e=this.complete(),t=a(this,d).pop(),i=this.last();t.point()||t.setColour(null),t.setFinal(!1),i&&(i.dropConnection(this.isNeighbour(t,i)),t.dropConnection(this.isNeighbour(i,t))),e&&(t.setFinal(!1),a(this,d).forEach(n=>n.setFinal(!1)),this.setStatus(0))}push(e){let t=this.last();t&&!this.canAdd(e)||(a(this,d).push(e),e.point()||e.setColour(a(this,Q)),t&&(t.addConnection(this.isNeighbour(e,t)),e.addConnection(this.isNeighbour(t,e))),this.complete()&&this.setStatus(2))}setStatus(e){if(!(a(this,Y)===2&&e===1)){if(h(this,Y,e),e===0){a(this,d).forEach(t=>t.setFinal(!1));return}a(this,d).forEach(t=>t.setFinal(!0))}}status(){return a(this,Y)}};d=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakMap;var Qt=gt;var J,H,nt,K,At=class extends dt{constructor(t,i=null){super((0,it.h)(".cell"));l(this,J,null);l(this,H,[]);l(this,nt,void 0);l(this,K,void 0);h(this,J,i),h(this,nt,t),h(this,K,i!==null),this.attr("data-i",t.toString()),i!==null&&(this.attr("data-id",i.toString()),this.attr("data-point"))}colour(){return a(this,J)}index(){return a(this,nt)}point(){return a(this,K)}setColour(t){if(a(this,K))throw new TypeError("Cannot change the colour of a point");if(h(this,J,t),t===null){this.removeAttr("data-id");return}this.attr("data-id",t.toString())}addConnection(t){a(this,H).includes(t)||(a(this,H).push(t),this.attr("data-"+t))}dropConnection(t){let i=a(this,H).indexOf(t);i!==-1&&(a(this,H).splice(i,1),this.removeAttr("data-"+t))}setFinal(t){if(t){this.attr("data-final");return}this.removeAttr("data-final")}};J=new WeakMap,H=new WeakMap,nt=new WeakMap,K=new WeakMap;var Xt=At;var Yt=(r,e=[])=>({cell:r,stack:e}),D,at,st,Z,k,ot,$,ut,yt=class{constructor(e,t,i){l(this,D,[]);l(this,at,void 0);l(this,st,void 0);l(this,Z,void 0);l(this,k,new Map);l(this,ot,[]);l(this,$,[]);l(this,ut,void 0);h(this,st,t),h(this,Z,e),h(this,ut,i),h(this,at,e.cells()),a(this,$).push(Yt(t))}generate(){for(;a(this,$).length;){let e=a(this,$).shift(),{cell:t}=e;a(this,ot).includes(t)||(this.neighboursOf(t).forEach(i=>{if(i.point()&&a(this,st).colour()!==i.colour()||e.stack.includes(i))return;let n=Yt(i,[...e.stack,t]);if(i===a(this,ut)){a(this,D).push(n.stack);return}a(this,$).push(n)}),a(this,ot).push(t))}}isNeighbour(e,t){return Ct(e,t,a(this,Z).width(),a(this,Z).height())}isPathAvailable(){return a(this,D).length===0&&this.generate(),a(this,D).length>0}neighboursOf(e){return a(this,k).has(e)||a(this,k).set(e,a(this,at).filter(t=>this.isNeighbour(e,t)!==!1)),a(this,k).get(e)}shortestPath(){a(this,D).length===0&&this.generate();let[e]=a(this,D).sort((t,i)=>t.length-i.length);return e}};D=new WeakMap,at=new WeakMap,st=new WeakMap,Z=new WeakMap,k=new WeakMap,ot=new WeakMap,$=new WeakMap,ut=new WeakMap;var Jt=yt;function Kt(r,e,t){var i=t||{},n=i.noTrailing,s=n===void 0?!1:n,p=i.noLeading,f=p===void 0?!1:p,L=i.debounceMode,C=L===void 0?void 0:L,T,x=!1,q=0;function S(){T&&clearTimeout(T)}function P(G){var F=G||{},A=F.upcomingOnly,R=A===void 0?!1:A;S(),x=!R}function _(){for(var G=arguments.length,F=new Array(G),A=0;A<G;A++)F[A]=arguments[A];var R=this,w=Date.now()-q;if(x)return;function V(){q=Date.now(),e.apply(R,F)}function I(){T=void 0}!f&&C&&!T&&V(),S(),C===void 0&&w>r?f?(q=Date.now(),s||(T=setTimeout(C?I:V,r))):V():s!==!0&&(T=setTimeout(C?I:V,C===void 0?r-w:r))}return _.cancel=P,_}var B,m,j,lt,ht,Et=class extends dt{constructor(t,i,n=[]){super((0,it.h)(".grid"));l(this,B,new Map);l(this,m,null);l(this,j,new Map);l(this,lt,void 0);l(this,ht,void 0);let s=t*i;n.length<s&&n.push(...new Array(s-n.length).fill(null));let p=Math.sqrt(n.length);if(p!==Math.floor(p))throw new TypeError("Invalid cell data");this.setSize(t,i),n.forEach(f=>{a(this,B).set(f.element(),f),this.append(f)}),this.bindEvents()}static loadFromString(t,i,n){let s=n.match(/\d+|[a-z]/gi);if(s===null)throw new TypeError("Invalid grid definition");let p=s.flatMap(f=>/^\d+$/.test(f)?new Array(parseInt(f)).fill(null):parseInt(f,36)-9);return new Et(t,i,p.map((f,L)=>new Xt(L,f)))}bindEvents(){this.onEach(["touchstart","mousedown"],t=>{if(t instanceof MouseEvent&&t.buttons!==1)return;t.preventDefault();let i=this.cellFromEvent(t);if(i===null)return;let n=this.pathFromCell(i);if(n&&n.complete()&&n.last()===i){h(this,m,n),n.setStatus(0),n.clear(),n.push(i);return}if(n&&n.last()!==i){h(this,m,n),n.setStatus(0),n.breakAt(i);return}if(n&&n.last()===i){h(this,m,n),n.setStatus(0);return}if(!i.point())return;let s=new Qt(i.colour(),this);h(this,m,s),a(this,j).set(s.colour(),s)}),this.onEach(["touchmove","mousemove"],Kt(1e3/60,t=>{if(t instanceof MouseEvent&&!t.buttons)return;let i=this.cellFromEvent(t),n=a(this,m);i===null||n===null||n&&n.status()===2&&!n.includes(i)||n.last()===i||this.handleAddCellToCurrentPath(i)})),this.onEach(["touchend","mouseup"],()=>{a(this,m)!==null&&(a(this,m).setStatus(1),a(this,m).length()<2&&(a(this,m).clear(),a(this,j).delete(a(this,m).colour())),h(this,m,null))})}cells(){return Array.from(a(this,B).values())}cellFromEvent(t){var i,n;return t instanceof MouseEvent?(i=a(this,B).get(t.relatedTarget||t.target))!=null?i:null:(n=a(this,B).get(document.elementFromPoint(t.touches[0].pageX,t.touches[0].pageY)))!=null?n:null}handleAddCellToCurrentPath(t){let i=this.pathFromCell(t),n=a(this,m);if(i&&i!==n&&!t.point()&&(i.breakAt(t),i.pop()),n.includes(t)&&n.last()!==t&&n.breakAt(t),n.canAdd(t)){n.push(t);return}let s=new Jt(this,n.last(),t);s.isPathAvailable()&&s.shortestPath().forEach(p=>this.handleAddCellToCurrentPath(p))}height(){return a(this,lt)}pathFromCell(t){let i=null;return a(this,j).forEach(n=>{i||n.includes(t)&&(i=n)}),i===null&&t.point()&&a(this,j).has(t.colour())&&(i=a(this,j).get(t.colour()),i.canAdd(t)||i.clear()),i}setSize(t,i){h(this,lt,t),h(this,ht,i),this.element().style.setProperty("--height",t.toString()),this.element().style.setProperty("--width",i.toString())}width(){return a(this,ht)}},wt=Et;B=new WeakMap,m=new WeakMap,j=new WeakMap,lt=new WeakMap,ht=new WeakMap;var Zt=wt;var kt=[[8,8,"2b7gfe5d10d1f3b1g2e1c2ca1h3a5h5"]],we=Zt.loadFromString(...kt[Math.floor(Math.random()*kt.length)]),Ee=document.getElementById("app");Ee.append(we.element());})();
//# sourceMappingURL=app.js.map
